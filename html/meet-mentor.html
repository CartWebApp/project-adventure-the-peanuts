<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Pagan</title>
  <link rel="icon" href="images/icon.png">
  <link rel="stylesheet" href="../css/meet-mentor.css" />
</head>
<body>
  <div id="container">
    <div id="scene"></div>

    <div id="dialogue-bar">
      <p id="dialogue-text">Welcome, <span id="player-name">Player</span></p>
      <button id="next-btn">▶</button>
    </div>
  </div>
<script>
    const dialogueLines = [
  "You forgot to say your night prayers at the inner altar! Don’t forget what mama and papa said!",
  "You ",
  ];

  let currentLine = 0;
  let charIndex = 0;
  let typing = false;
  const dialogueText = document.getElementById("dialogue-text");
  const nextBtn = document.getElementById("next-btn");
  let blinkTimeout;

  function typeLine(line) {
    typing = true;
    dialogueText.textContent = "";
    charIndex = 0;
    clearTimeout(blinkTimeout);
    nextBtn.classList.remove("blink");

    const interval = setInterval(() => {
      if (charIndex < line.length) {
        dialogueText.textContent += line.charAt(charIndex);
        charIndex++;
      } else {
        clearInterval(interval);
        typing = false;
        startBlinkTimer(); // start blinking countdown after typing finishes
      }
    }, 30);
  }

  function showNextLine() {
  if (typing) return;

  clearTimeout(blinkTimeout);
  nextBtn.classList.remove("blink");

  if (currentLine < dialogueLines.length) {
    typeLine(dialogueLines[currentLine]);
    currentLine++;
  } else {
    dialogueText.textContent = "But you? You burst through the doors.";
    nextBtn.disabled = true;

    // Wait for 2 seconds before going to the next page
    setTimeout(() => {
      window.location.href = "refuse-the-call.html"; // Go to the next page
    }, 2000); // 2 seconds delay
  }
}

  

  function startBlinkTimer() {
    blinkTimeout = setTimeout(() => {
      nextBtn.classList.add("blink");
    }, 5000); // 5 seconds of inactivity
  }

  nextBtn.addEventListener("click", showNextLine);

  document.addEventListener("click", function (e) {
    if (!e.target.closest("#next-btn")) {
      showNextLine();
    }
  });

  showNextLine(); // show first line


</script>
</body>
</html>
