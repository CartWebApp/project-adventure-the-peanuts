<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Pagan</title>
  <link rel="icon" href="images/icon.png">
  <link rel="stylesheet" href="call-to-action.css" />
</head>
<body>
  <div id="container">
    <div id="scene"></div>

    <div id="dialogue-bar">
      <p id="dialogue-text">Welcome, <span id="player-name">Player</span></p>
      <button id="next-btn">▶</button>
    </div>
  </div>
<script>
    const dialogueLines = [
  "You forgot to say your night prayers at the inner altar! Don’t forget what mama and papa said!",
  "“Well, carp fish,” you muttered to yourself before rush—tiptoeing back inside the corridors down to the altar where all were welcomed.",
  "But as you briskly walked to the altar, you hear two voices arguing in altercation…",
  "“I know what you did, Father,” the voice growled with no respect, but you knew who exactly “Father” was.",
  "The Holy Pope.",
  "“Quiet, Son Thomas,” the Holy Father spat out in a hush like he had some gunk stuck in his throat, “You saw nothing. Dismiss yourself.”",
  "You closed in, nearing the sound of the argument, against the wall you pressed and listened in…",
  "“...I won’t grovel again, Father...!” The voice strained, like the mysterious voice was trying to keep their bottle of anger sealed under a cap lid, “I know…I know you approved of the murder of Elizabeth Likena…because she found out you were damning our Lord’s name and celebrating a new numen—”",
  "“Quiet!” The Holy Father shouted.",
  "The sudden volume of the voice reeled you back like the force of a hurricane shoving you away in shock. You felt paralysed as if someone threw cold water over you. The keyhole pour light onto you, and you could see the small fight.",
  "“I will not tolerate any disrespect from you unsightly bunch, peasant,” the Holy Father declared, “...You will have your mouth shut and obedient as you once were…",
  "“Or else!”",
  "“No!” The other person, Son Thomas rebutted right back, and from what you could hear, stepped closer to the Holy Father.",
  "“DISOBEDIENT HEATHEN!” Holy Father roared.",
  "Your eyes widen as you watch an ornate dagger lift itself high up in the air and like lightning, strike down into the heart of Saint Thomas.",
  "You gasped in shock like the stony gaze of Medusa turned you into stone. You witness the Holy Father step back, his robes that were was white as limb’s wool become tainted with the purity of a saint.",
];

  let currentLine = 0;
  let charIndex = 0;
  let typing = false;
  const dialogueText = document.getElementById("dialogue-text");
  const nextBtn = document.getElementById("next-btn");
  let blinkTimeout;

  function typeLine(line) {
    typing = true;
    dialogueText.textContent = "";
    charIndex = 0;
    clearTimeout(blinkTimeout);
    nextBtn.classList.remove("blink");

    const interval = setInterval(() => {
      if (charIndex < line.length) {
        dialogueText.textContent += line.charAt(charIndex);
        charIndex++;
      } else {
        clearInterval(interval);
        typing = false;
        startBlinkTimer(); // start blinking countdown after typing finishes
      }
    }, 30);
  }

  function showNextLine() {
  if (typing) return;

  clearTimeout(blinkTimeout);
  nextBtn.classList.remove("blink");

  if (currentLine < dialogueLines.length) {
    typeLine(dialogueLines[currentLine]);
    currentLine++;
  } else {
    dialogueText.textContent = "But you? You burst through the doors.";
    nextBtn.disabled = true;

    // Wait for 2 seconds before going to the next page
    setTimeout(() => {
      window.location.href = "refuse-the-call.html"; // Go to the next page
    }, 2000); // 2 seconds delay
  }
}

  

  function startBlinkTimer() {
    blinkTimeout = setTimeout(() => {
      nextBtn.classList.add("blink");
    }, 5000); // 5 seconds of inactivity
  }

  nextBtn.addEventListener("click", showNextLine);

  document.addEventListener("click", function (e) {
    if (!e.target.closest("#next-btn")) {
      showNextLine();
    }
  });

  showNextLine(); // show first line


</script>
</body>
</html>
