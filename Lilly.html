<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Pagan</title>
  <link rel="icon" href="images/icon.png">
  <link rel="stylesheet" href="Lilly.css" />
</head>
<body>
  <div id="container">
    <div id="scene"></div>

    <div id="dialogue-bar">
      <p id="dialogue-text">Welcome, <span id="player-name">Player</span></p>
      <button id="next-btn">▶</button>
    </div>

    <!-- Choices Section -->
    <div id="choices" style="display: none;">
      <button id="choice-1">Stay Quiet</button>
      <button id="choice-2">Respond Back</button>
    </div>
  </div>

  </div>
<script>
    const dialogueLines = [
  "She stares at you with scrutiny, enough to make rats tremble",
  "The Pope looks down at you, seemingly surprised to find an eavesdropper.", 
  "“What do you think, sire? Execute the vermin?”",
  "The Pope eerily hums, watching you, deciding your worth.",
  "“Keep this young believer alive.”",
  "“Because, daughter Lily...”",
  "You felt the Pope's eyes crawl all over you.",
  "“One shall pay for the sin of eavesdropping on a precious sight.”",
  "The Pope went quiet for a second...",
  "Sister Lily glanced at the Pope silently before waving you off.",
  "You felt Sister Lily grab your arm and shove you away from the Pope and the massacre...",
  "“Head home now,” she said before turning away",
  "As much as you wanted to ponder and curse her, staying out at nights wasn't a good idea.",
  "You ran into the night, weaving through the eerie streets to the outskirts of the city...",
  "You could almost taste home...",
  "You stumbled on your feet.",
  "There, your parents' home stood before you like a parent inviting their open arms at you.",
  "You quickly brushed your clothes neatly and entered inside the home with haste.",
  "“There you are darling,” your mother says with a smile upon your arrival. Then your father reaches out to ruffle your hair and he speaks, “There you are, my child.”",
  "You respond:",
  "Head to your room, okay? Must've been a long day,” your parents smiled kindly at you that you couldn't really be angry at them.",
  "You went inside your room, it was a humble room; only a bed, a shrine, a few books, and a few wooden toys crafted by your grandparents.",
  "You choose: (choose an etheral voice, choose a scary voice, choose none)",
  "You arose early in the morning, sneaking out of the room, you didn't want to wake up your parents and disturb their sleep.",
  "With the creak of the door, you escaped your parent's home and headed off into the outskirts.",
  "You found the church and you headed inside.",
  "Inside, you found the Pope standing there.",
  "“Young believer,” the Pope approached you and appraised you. “You have a task that is demanded of you. Find the heathen, discover their blashempy.”",
  "You respond:",
  "“Go off now, I await.” The Pope left you alone and you decided to head outside, there was bounded to be some clues.",
  "Minigame:",
  "You found yourself deep within the catacombs. Nothing but darkness, cobwebs, torches, and--",
  "There was something hidden within the darkness.",
  "You find a figure made of stone and wood.",
  "A voice shouts at you, “You there!”",
  "“What are you doing?” You heard a gruff voice behind you.",
  "Looking back, you saw Sister Lily and Archbishop Harald.",
  "“Step away child,” Archbishop Harald said",
  "Sister Lily approached and spoke, “How did you find this place?”",
  "“I...” you trailed off, watching the knights.",
  "“It is rather dangerous for someone like you to be--” Archbishop Harald was cut off",
  "Sister Lily scoffed, “Whatever you think you are doing, enough with it. Give us that.”",
  "You choose: (agree and give back, or, refuse)",
  "Returning back to the cathedral, you see the Pope waiting there after his grandoise sermons.",
  "“Well?”",
  "You choose: (tell the truth and show the figure, or, lie)",
  "(either way) The Pope summons forth the Sister Lily and Archbishop Harald. “Sister Lily and Archbishop Harald are hereby sent to the catacombs for execution.”",
  "Both persons look betrayed at you, like they couldn't believe you did that, but they were forcibly taken away before you could hear them curse you.",
  "“You done yourself well, [user name],” the Pope praised, “Perhaps you are more useful than you look. I shall grant you the honors of the execution.”",
  "You respond: (no way, or, okay I will)",
  "(either way) Later, deep within the catacombs, the Pope walked you to the catacombs. Inside, the two individuals stayed locked inside there.",
  "“Use the figure.” The Pope handed you the figure back again.",
  "“And kill them,” he whispered into your ear.",
  "The Pope watched you as you stepped forward.",
  "“I can't believe you'll do this,” Archbishop Harald said.",
  "“Obedient sheep,” Sister Lily said.",
  "Minigame: (choose to kill Sister Lily, or, Archbishop Harald)",
  "But before you could kill anyone, you hear something growl in the darkness.",
  "You all watched as a...demon crawled forward.",
  "“Ghaume,” the Pope whispered before slowly stepping forward, leaving you and the Templer dumbfounded.",
  "The Pope began to yell, “Come to me! Hear---”",
  "The Pope vanished, gone, into the mouth of the demon.",
  "Minigame: kill the demon Ghuame",
  "(if you were lying) After the demon is killed, Sister Lily says, “You're a schemer, a liar, only could I hope that you face damnation. Leave us.”",
  "(if you told the truths and expressed regret) After the demon is killed, Sister Lily says, “You made difficult choices I imagined, I have nothing else for you other than run away, far.”",
  "You ran out of there, toring off your stained robes and running off into the light of God to your parents home.",
  "You approached the doors...and it opened.",
  "(ending 1: heaven)",
  "(ending 2: hell)",
  "(ending 3: the pope wins)",
  ];

  let currentLine = 0;
  let charIndex = 0;
  let typing = false;
  const dialogueText = document.getElementById("dialogue-text");
  const nextBtn = document.getElementById("next-btn");
  let blinkTimeout;

  function typeLine(line) {
    typing = true;
    dialogueText.textContent = "";
    charIndex = 0;
    clearTimeout(blinkTimeout);
    nextBtn.classList.remove("blink");

    const interval = setInterval(() => {
      if (charIndex < line.length) {
        dialogueText.textContent += line.charAt(charIndex);
        charIndex++;
      } else {
        clearInterval(interval);
        typing = false;
        startBlinkTimer(); // start blinking countdown after typing finishes
      }
    }, 30);
  }

  function showNextLine() {
  if (typing) return;

  clearTimeout(blinkTimeout);
  nextBtn.classList.remove("blink");

  if (currentLine < dialogueLines.length) {
    typeLine(dialogueLines[currentLine]);
    currentLine++;
  } else {
    dialogueText.textContent = "But you? You burst through the doors.";
    nextBtn.disabled = true;

    // Wait for 2 seconds before going to the next page
    setTimeout(() => {
      window.location.href = "refuse-the-call.html"; // Go to the next page
    }, 2000); // 2 seconds delay
  }
}

  

  function startBlinkTimer() {
    blinkTimeout = setTimeout(() => {
      nextBtn.classList.add("blink");
    }, 5000); // 5 seconds of inactivity
  }

  nextBtn.addEventListener("click", showNextLine);

  document.addEventListener("click", function (e) {
    if (!e.target.closest("#next-btn")) {
      showNextLine();
    }
  });

  const choice1Dialogue = [
  "You stay quiet, unsure of what to say...",
  "Your parents look at you with concern.",
  "They wait patiently.",
];

const choice2Dialogue = [
  "You respond confidently.",
  "Your parents smile proudly.",
  "They seem relieved to hear your voice.",
];


  showNextLine(); // show first line
</script>
</body>
</html>
